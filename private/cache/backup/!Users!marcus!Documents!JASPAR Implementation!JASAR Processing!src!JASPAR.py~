import gzip
import re
import pybedtools
from timeit import default_timer as timer

start = timer()
curr_time = timer()

jaspar_file = gzip.open("../Database/MA0864.1.tsv.gz")

print("Time taken to unzip file: {0:5f}".format(timer() - curr_time))
curr_time = timer()

contents = jaspar_file.readlines()

print("Time taken to readlines: {0:5f}".format(timer() - curr_time))
curr_time = timer()

regex = re.compile("\t|\n")

output = []

for line in contents[1:]:
    line = str(line, 'utf-8')
    data = regex.split(line)[:-1]
    data.pop(5)
    data = "  ".join(data)
    output.append(data)

print("Time taken to process file: {0:5f}".format(timer() - curr_time))
curr_time = timer()

output = "\n".join(output)

print("Time taken to join lines: {0:5f}".format(timer() - curr_time))
curr_time = timer()

t = pybedtools.BedTool(output, from_string=True)

print("Time taken to create BedTool object: {0:5f}".format(timer() - curr_time))
curr_time = timer()

print("Total time taken: {0:5f}".format(curr_time - start))

